{"remainingRequest":"F:\\sunrisers\\kka-pj\\clinicPortal\\node_modules\\babel-loader\\lib\\index.js!F:\\sunrisers\\kka-pj\\clinicPortal\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\sunrisers\\kka-pj\\clinicPortal\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\sunrisers\\kka-pj\\clinicPortal\\src\\pages\\Login\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\sunrisers\\kka-pj\\clinicPortal\\src\\pages\\Login\\Login.vue","mtime":1597210918850},{"path":"F:\\sunrisers\\kka-pj\\clinicPortal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1591157758729},{"path":"F:\\sunrisers\\kka-pj\\clinicPortal\\node_modules\\babel-loader\\lib\\index.js","mtime":1591157735766},{"path":"F:\\sunrisers\\kka-pj\\clinicPortal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1591157758729},{"path":"F:\\sunrisers\\kka-pj\\clinicPortal\\node_modules\\vue-loader\\lib\\index.js","mtime":1591157760591}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"F:\\\\sunrisers\\\\kka-pj\\\\clinicPortal\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport 'imports-loader?$=jquery,this=>window!messenger/build/js/messenger'; // eslint-disable-line\n\nimport Widget from '@/components/Widget/Widget';\nvar _window = window,\n    Messenger = _window.Messenger;\n/* eslint-disable */\n\nfunction initializationMessengerCode() {\n  (function () {\n    var $,\n        FlatMessage,\n        spinner_template,\n        __hasProp = {}.hasOwnProperty,\n        __extends = function __extends(child, parent) {\n      for (var key in parent) {\n        if (__hasProp.call(parent, key)) child[key] = parent[key];\n      }\n\n      function ctor() {\n        this.constructor = child;\n      }\n\n      ctor.prototype = parent.prototype;\n      child.prototype = new ctor();\n      child.__super__ = parent.prototype;\n      return child;\n    };\n\n    $ = jQuery;\n    spinner_template = '<div class=\"messenger-spinner\">\\n    <span class=\"messenger-spinner-side messenger-spinner-side-left\">\\n        <span class=\"messenger-spinner-fill\"></span>\\n    </span>\\n    <span class=\"messenger-spinner-side messenger-spinner-side-right\">\\n        <span class=\"messenger-spinner-fill\"></span>\\n    </span>\\n</div>';\n\n    FlatMessage = function (_super) {\n      __extends(FlatMessage, _super);\n\n      function FlatMessage() {\n        return FlatMessage.__super__.constructor.apply(this, arguments);\n      }\n\n      FlatMessage.prototype.template = function (opts) {\n        var $message;\n        $message = FlatMessage.__super__.template.apply(this, arguments);\n        $message.append($(spinner_template));\n        return $message;\n      };\n\n      return FlatMessage;\n    }(Messenger.Message);\n\n    Messenger.themes.air = {\n      Message: FlatMessage\n    };\n  }).call(window);\n}\n/* eslint-enable */\n\n\nexport default {\n  name: 'LoginPage',\n  components: {\n    Widget: Widget\n  },\n  data: function data() {\n    return {\n      errorMessage: null,\n      form: {\n        email: '',\n        password: ''\n      },\n      whatsappLink: '',\n      settingsdata: {},\n      isLoading: false,\n      locationClasses: 'messenger-fixed messenger-on-top messenger-on-right'\n    };\n  },\n  mounted: function mounted() {\n    this.getCoreSettings();\n  },\n  methods: {\n    getCoreSettings: function () {\n      var _getCoreSettings = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var response;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return this.axios.get('https://backend.medicodesolution.com/staging/coresettings');\n\n              case 3:\n                response = _context.sent;\n                this.settingsdata = response.data.settingsInfo[0];\n                this.whatsappLink = 'https://api.whatsapp.com/send?phone=' + this.settingsdata.whatsapp + '&text=Hello';\n                _context.next = 11;\n                break;\n\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](0);\n                console.error(_context.t0);\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 8]]);\n      }));\n\n      return function getCoreSettings() {\n        return _getCoreSettings.apply(this, arguments);\n      };\n    }(),\n    login: function login() {\n      var email = this.form.email;\n      var password = this.form.password;\n\n      if (email.length !== 0 && password.length !== 0) {\n        var self = this;\n        self.isLoading = true; // e.preventDefault();\n\n        self.$validator.validateAll().then(function (result) {\n          if (result) {\n            self.axios.post('https://backend.medicodesolution.com/staging/workforce/login', {\n              email: self.form.email,\n              password: self.form.password\n            }).then(function (response) {\n              if (response.status == 200 && response.data.success) {\n                //     console.log('token:'+response.data.token + '| staffInfo ' + response.data.staffInfo)\n                Messenger().post({\n                  message: response.data.success,\n                  hideAfter: 3,\n                  showCloseButton: true\n                });\n                window.localStorage.setItem('authenticated', true);\n                window.localStorage.setItem('workforceUsername', response.data.staffInfo.username);\n                window.localStorage.setItem('workforcePosition', response.data.staffInfo.position);\n                window.localStorage.setItem('workforceId', response.data.staffInfo.id);\n                window.localStorage.setItem('workforceCenter', response.data.staffInfo.center);\n\n                if (response.data.staffInfo.photoUrl != null && response.data.staffInfo.photoUrl != '') {\n                  window.localStorage.setItem('workforcePhotoUrl', response.data.staffInfo.photoUrl);\n                }\n\n                if (response.data.staffInfo.access != null && response.data.staffInfo.access != '') {\n                  window.localStorage.setItem('workforceAccess', response.data.staffInfo.access);\n                }\n\n                return self.$router.push('/app/dashboard');\n              } else {\n                if (response.data.error) {\n                  self.isLoading = false;\n                  return Messenger().post({\n                    type: 'error',\n                    message: response.data.error,\n                    hideAfter: 3,\n                    showCloseButton: true\n                  });\n                } else {\n                  self.isLoading = false;\n                  return Messenger().post({\n                    type: 'error',\n                    message: response.error,\n                    hideAfter: 3,\n                    showCloseButton: true\n                  });\n                }\n              }\n            }).catch(function (error) {\n              self.isLoading = false;\n              return Messenger().post({\n                type: 'error',\n                message: error,\n                hideAfter: 3,\n                showCloseButton: true\n              });\n            });\n          }\n\n          if (!result) {\n            self.isLoading = false;\n            return;\n          }\n        });\n      }\n    },\n    forgotPassword: function forgotPassword() {\n      var email = this.form.email;\n\n      if (email.length == 0) {\n        return Messenger().post({\n          type: 'error',\n          message: 'Fill up email field to request Reset Password link.'\n        });\n      } else if (email.length !== 0) {\n        var self = this;\n        self.isLoading = true;\n        self.axios.post('https://backend.medicodesolution.com/staging/workforce/forgot-password/' + this.form.email).then(function (response) {\n          if (response.status == 200 && response.data.success) {\n            self.isLoading = false;\n            return Messenger().post({\n              message: response.data.success,\n              hideAfter: 3,\n              showCloseButton: true\n            });\n          } else {\n            if (response.data.error) {\n              self.isLoading = false;\n              return Messenger().post({\n                type: 'error',\n                message: response.data.error,\n                hideAfter: 3,\n                showCloseButton: true\n              });\n            } else {\n              self.isLoading = false;\n              return Messenger().post({\n                type: 'error',\n                message: response.error,\n                hideAfter: 3,\n                showCloseButton: true\n              });\n            }\n          }\n        }).catch(function (error) {\n          self.isLoading = false;\n          return Messenger().post({\n            type: 'error',\n            message: error,\n            hideAfter: 3,\n            showCloseButton: true\n          });\n        });\n      }\n    }\n  },\n  created: function created() {\n    if (window.localStorage.getItem('authenticated') === 'true') {\n      this.$router.push('/app/dashboard');\n    }\n\n    initializationMessengerCode();\n    Messenger.options = {\n      extraClasses: this.locationClasses,\n      theme: 'air',\n      showCloseButton: true\n    };\n  }\n};",{"version":3,"sources":["Login.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"login-page\">\r\n    <b-container>\r\n      <Widget class=\"mx-auto\" title=\"<h3 class='mt-0 fw-normal text-center'>Login to KKA Portal</h3>\" customHeader>\r\n       <p class=\"text-center login-info mb-0 mt\">\r\n     <!--      Use Facebook, Twitter or your email to sign in.  -->\r\n        </p>  \r\n        <p class=\"text-center login-info\">\r\n          <a :href=\"whatsappLink\" target=\"_blank\">Trouble logging in? Click to Contact Admin through Whatsapp.</a>\r\n        </p>\r\n        <form class=\"mt\" @submit.prevent=\"login\">\r\n          <b-alert class=\"alert-sm\" variant=\"danger\" :show=\"!!errorMessage\">\r\n            {{errorMessage}}\r\n          </b-alert>\r\n          <b-form-group label=\"Email\" label-for=\"username-input\">\r\n            <b-input-group class=\"input-group-transparent\">\r\n              <b-input-group-text slot=\"prepend\"><i class=\"fa fa-user text-white\"></i></b-input-group-text>\r\n              <b-form-input id=\"username-input\"\r\n                            class=\"input-transparent pl-0\"\r\n                            type=\"text\"\r\n                            v-model=\"form.email\"\r\n                            required\r\n                            placeholder=\"Your Email\" />\r\n            </b-input-group>\r\n          </b-form-group>\r\n          <b-form-group label=\"Password\" label-for=\"password-input\">\r\n            <b-input-group class=\"input-group-transparent\">\r\n              <b-input-group-text slot=\"prepend\"><i class=\"fa fa-lock text-white\"></i></b-input-group-text>\r\n              <b-form-input id=\"password-input\"\r\n                            class=\"input-transparent pl-0\"\r\n                            type=\"password\"\r\n                            v-model=\"form.password\"\r\n                            required\r\n                            placeholder=\"Your Password\" />\r\n            </b-input-group>\r\n          </b-form-group>\r\n          <div class=\"widget-middle-overflow bg-widget mt-4 px-4 py-3\">\r\n            <b-button class=\"btn-block btn-lg fs-normal\" type=\"submit\" variant=\"danger\" v-if=\"isLoading==false\">\r\n              <span class=\"login-circle\"><i class=\"fa fa-caret-right\"></i></span>\r\n              Sign in\r\n            </b-button>\r\n            <a href=\"#\" class=\"text-center text-gray w-100 d-block mt-4\" @click=\"forgotPassword\"  v-if=\"isLoading==false\">Forgot Password?</a>\r\n          </div>\r\n          <div class=\"widget-bottom-overflow\">\r\n         <!--   <b-button class=\"btn-block btn-lg fs-normal\" type=\"cancel\" variant=\"primary\">\r\n              <i class=\"fa fa-facebook-square mr-2 fa-lg\"></i>\r\n              Login with Facebook\r\n            </b-button> -->\r\n          </div>\r\n        </form>\r\n      </Widget>\r\n    </b-container>\r\n    <footer class=\"footer\">\r\n         KKA Clinic Portal - Powered by <a href=\"https://www.sunrisers.com.my/\" target=\"_blank\">Sunrisers TS</a>\r\n    </footer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport 'imports-loader?$=jquery,this=>window!messenger/build/js/messenger'; // eslint-disable-line\r\nimport Widget from '@/components/Widget/Widget';\r\n\r\nconst { Messenger } = window;\r\n\r\n/* eslint-disable */\r\nfunction initializationMessengerCode() {\r\n  (function () {\r\n    let $,\r\n      FlatMessage,\r\n      spinner_template,\r\n      __hasProp = {}.hasOwnProperty,\r\n      __extends = function (child, parent) {\r\n        for (const key in parent) {\r\n          if (__hasProp.call(parent, key)) child[key] = parent[key];\r\n        }\r\n\r\n        function ctor() {\r\n          this.constructor = child;\r\n        }\r\n\r\n        ctor.prototype = parent.prototype;\r\n        child.prototype = new ctor();\r\n        child.__super__ = parent.prototype;\r\n        return child;\r\n      };\r\n\r\n    $ = jQuery;\r\n\r\n    spinner_template = '<div class=\"messenger-spinner\">\\n    <span class=\"messenger-spinner-side messenger-spinner-side-left\">\\n        <span class=\"messenger-spinner-fill\"></span>\\n    </span>\\n    <span class=\"messenger-spinner-side messenger-spinner-side-right\">\\n        <span class=\"messenger-spinner-fill\"></span>\\n    </span>\\n</div>';\r\n\r\n    FlatMessage = (function (_super) {\r\n      __extends(FlatMessage, _super);\r\n\r\n      function FlatMessage() {\r\n        return FlatMessage.__super__.constructor.apply(this, arguments);\r\n      }\r\n\r\n      FlatMessage.prototype.template = function (opts) {\r\n        let $message;\r\n        $message = FlatMessage.__super__.template.apply(this, arguments);\r\n        $message.append($(spinner_template));\r\n        return $message;\r\n      };\r\n\r\n      return FlatMessage;\r\n    }(Messenger.Message));\r\n\r\n    Messenger.themes.air = {\r\n      Message: FlatMessage,\r\n    };\r\n  }).call(window);\r\n}\r\n/* eslint-enable */\r\n\r\nexport default {\r\n  name: 'LoginPage',\r\n  components: { Widget },\r\n  \r\n  data() {\r\n   \r\n    return {\r\n      errorMessage: null,\r\n      form: {\r\n        email: '',\r\n        password: '',\r\n      },\r\n      whatsappLink:'',\r\n      settingsdata:{},\r\n      isLoading:false,\r\n      locationClasses: 'messenger-fixed messenger-on-top messenger-on-right',\r\n    };\r\n  },\r\n    mounted(){\r\n     this.getCoreSettings();      \r\n   },\r\n  methods: {\r\n    \r\n   async getCoreSettings() {\r\n  try {\r\n   const response = await this.axios.get('https://backend.medicodesolution.com/staging/coresettings')\r\n   this.settingsdata = response.data.settingsInfo[0];\r\n   this.whatsappLink =  'https://api.whatsapp.com/send?phone='+ this.settingsdata.whatsapp +'&text=Hello';\r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n},\r\n    login() {\r\n      const email = this.form.email;\r\n      const password = this.form.password;\r\n\r\n      if (email.length !== 0 && password.length !== 0) {\r\n       var self = this;\r\n       self.isLoading = true;\r\n     // e.preventDefault();\r\n      self.$validator.validateAll().then((result) => {\r\n\t\t  if (result) {\r\n                self.axios.post('https://backend.medicodesolution.com/staging/workforce/login', {\r\n                    email:self.form.email,\r\n                    password:self.form.password\r\n                })\r\n                .then(function (response) {\r\n                if(response.status == 200 && response.data.success){\r\n           //     console.log('token:'+response.data.token + '| staffInfo ' + response.data.staffInfo)\r\n                Messenger().post({message:response.data.success, hideAfter: 3,showCloseButton:true});\r\n                window.localStorage.setItem('authenticated', true);\r\n                window.localStorage.setItem('workforceUsername', response.data.staffInfo.username);\r\n                window.localStorage.setItem('workforcePosition', response.data.staffInfo.position);\r\n                window.localStorage.setItem('workforceId', response.data.staffInfo.id);\r\n                window.localStorage.setItem('workforceCenter', response.data.staffInfo.center);\r\n                if( response.data.staffInfo.photoUrl!= null &&  response.data.staffInfo.photoUrl!=''){\r\n               window.localStorage.setItem('workforcePhotoUrl', response.data.staffInfo.photoUrl);\r\n                }\r\n                     if( response.data.staffInfo.access!= null &&  response.data.staffInfo.access!=''){\r\n               window.localStorage.setItem('workforceAccess', response.data.staffInfo.access);\r\n                }\r\n               \r\n                return self.$router.push('/app/dashboard');\r\n                }\r\n                else {\r\n                  if(response.data.error){\r\n                    self.isLoading = false;\r\n                  return Messenger().post({ type:'error',message :response.data.error, hideAfter: 3,showCloseButton:true});\r\n          \r\n                  }\r\n                 else {\r\n                   self.isLoading = false;\r\n                 return Messenger().post({ type:'error',message :response.error, hideAfter: 3,showCloseButton:true});\r\n                   }\r\n                }\r\n                })\r\n                .catch(function (error) {\r\n                  self.isLoading = false;\r\n                  return Messenger().post({ type:'error',message :error, hideAfter: 3,showCloseButton:true});                \r\n                });   \r\n\t\t  }\r\n                  if(!result){\r\n                    self.isLoading = false;\r\n        \t          return;\r\n                  }\r\n\t\t});\r\n\r\n\r\n      }\r\n    },\r\n      forgotPassword() {\r\n      const email = this.form.email;\r\n      if (email.length == 0 ) {\r\n         return Messenger().post({ type:'error',message :'Fill up email field to request Reset Password link.'});\r\n      }\r\n\r\n     else if (email.length !== 0 ) {\r\n    var self = this;\r\n       self.isLoading = true;\r\n      self.axios.post('https://backend.medicodesolution.com/staging/workforce/forgot-password/'+this.form.email)\r\n                .then(function (response) {\r\n                if(response.status == 200 && response.data.success){\r\n                self.isLoading = false;\r\n              \r\n               return Messenger().post({message:response.data.success, hideAfter: 3,showCloseButton:true});\r\n               \r\n                }\r\n                else {\r\n                  if(response.data.error){\r\n                    self.isLoading = false;\r\n                  return Messenger().post({ type:'error',message :response.data.error, hideAfter: 3,showCloseButton:true});\r\n          \r\n                  }\r\n                 else {\r\n                   self.isLoading = false;\r\n                 return Messenger().post({ type:'error',message :response.error, hideAfter: 3,showCloseButton:true});\r\n                   }\r\n                }\r\n                })\r\n                .catch(function (error) {\r\n                  self.isLoading = false;\r\n                  return Messenger().post({ type:'error',message :error, hideAfter: 3,showCloseButton:true});                \r\n                });   \r\n\r\n      }\r\n    },\r\n  },\r\n  created() {\r\n    if (window.localStorage.getItem('authenticated') === 'true') {\r\n      this.$router.push('/app/dashboard');\r\n    }\r\n       initializationMessengerCode();\r\n    Messenger.options = {\r\n      extraClasses: this.locationClasses,\r\n      theme: 'air',\r\n      showCloseButton: true,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style src=\"./Login.scss\" lang=\"scss\" scoped />\r\n"],"sourceRoot":"src\\pages\\Login"}]}