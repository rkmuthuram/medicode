{"remainingRequest":"F:\\sunrisers\\medicode\\medicode\\adminPortal\\node_modules\\babel-loader\\lib\\index.js!F:\\sunrisers\\medicode\\medicode\\adminPortal\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\sunrisers\\medicode\\medicode\\adminPortal\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\sunrisers\\medicode\\medicode\\adminPortal\\src\\pages\\Accounts\\CheckOutView.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\sunrisers\\medicode\\medicode\\adminPortal\\src\\pages\\Accounts\\CheckOutView.vue","mtime":1610310651784},{"path":"F:\\sunrisers\\medicode\\medicode\\adminPortal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1591157758729},{"path":"F:\\sunrisers\\medicode\\medicode\\adminPortal\\node_modules\\babel-loader\\lib\\index.js","mtime":1591157735766},{"path":"F:\\sunrisers\\medicode\\medicode\\adminPortal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1591157758729},{"path":"F:\\sunrisers\\medicode\\medicode\\adminPortal\\node_modules\\vue-loader\\lib\\index.js","mtime":1591157760591}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.function.name\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"F:\\\\sunrisers\\\\medicode\\\\medicode\\\\adminPortal\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport 'imports-loader?$=jquery,this=>window!messenger/build/js/messenger'; // eslint-disable-line\n\nimport Widget from '@/components/Widget/Widget';\nimport vSelect from 'vue-select';\nimport mock from './mock';\nvar _window = window,\n    Messenger = _window.Messenger;\n/* eslint-disable */\n\nfunction initializationMessengerCode() {\n  (function () {\n    var $,\n        FlatMessage,\n        spinner_template,\n        __hasProp = {}.hasOwnProperty,\n        __extends = function __extends(child, parent) {\n      for (var key in parent) {\n        if (__hasProp.call(parent, key)) child[key] = parent[key];\n      }\n\n      function ctor() {\n        this.constructor = child;\n      }\n\n      ctor.prototype = parent.prototype;\n      child.prototype = new ctor();\n      child.__super__ = parent.prototype;\n      return child;\n    };\n\n    $ = jQuery;\n    spinner_template = '<div class=\"messenger-spinner\">\\n    <span class=\"messenger-spinner-side messenger-spinner-side-left\">\\n        <span class=\"messenger-spinner-fill\"></span>\\n    </span>\\n    <span class=\"messenger-spinner-side messenger-spinner-side-right\">\\n        <span class=\"messenger-spinner-fill\"></span>\\n    </span>\\n</div>';\n\n    FlatMessage = function (_super) {\n      __extends(FlatMessage, _super);\n\n      function FlatMessage() {\n        return FlatMessage.__super__.constructor.apply(this, arguments);\n      }\n\n      FlatMessage.prototype.template = function (opts) {\n        var $message;\n        $message = FlatMessage.__super__.template.apply(this, arguments);\n        $message.append($(spinner_template));\n        return $message;\n      };\n\n      return FlatMessage;\n    }(Messenger.Message);\n\n    Messenger.themes.air = {\n      Message: FlatMessage\n    };\n  }).call(window);\n}\n/* eslint-enable */\n\n\nexport default {\n  name: 'FormValidation',\n  components: {\n    Widget: Widget,\n    vSelect: vSelect\n  },\n  data: function data() {\n    return {\n      clinicId: this.$route.params.clinicId,\n      clinicName: '',\n      mock: mock,\n      data: {\n        attachments: []\n      },\n      allProducts: new Array(),\n      checkOutId: this.$route.params.checkOutId,\n      isLoading: false,\n      locationClasses: 'messenger-fixed messenger-on-top messenger-on-right'\n    };\n  },\n  methods: {\n    getAccount: function () {\n      var _getAccount = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var response;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return this.axios.get('https://backend.medicodesolution.com/development/clinic/' + this.clinicId);\n\n              case 3:\n                response = _context.sent;\n                this.clinicName = response.data.accountInfo[0].name;\n                _context.next = 10;\n                break;\n\n              case 7:\n                _context.prev = 7;\n                _context.t0 = _context[\"catch\"](0);\n                console.error(_context.t0);\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 7]]);\n      }));\n\n      return function getAccount() {\n        return _getAccount.apply(this, arguments);\n      };\n    }(),\n    navigateToDashboard: function navigateToDashboard() {\n      this.$router.push({\n        name: 'Dashboard'\n      });\n    },\n    getCheckOut: function () {\n      var _getCheckOut = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var response;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return this.axios.get('https://backend.medicodesolution.com/development/checkout/' + this.checkOutId);\n\n              case 3:\n                response = _context2.sent;\n                this.data = response.data.checkOutInfo[0];\n                this.allProducts = JSON.parse(this.data.allProducts);\n                _context2.next = 11;\n                break;\n\n              case 8:\n                _context2.prev = 8;\n                _context2.t0 = _context2[\"catch\"](0);\n                console.error(_context2.t0);\n\n              case 11:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 8]]);\n      }));\n\n      return function getCheckOut() {\n        return _getCheckOut.apply(this, arguments);\n      };\n    }(),\n    rollbackStock: function () {\n      var _rollbackStock = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3() {\n        var self, finalProducts, index, length, response;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                self = this;\n                finalProducts = new Array();\n                index = 0;\n                length = self.allProducts.length; //  console.log(this.allSelectedProducts);\n\n                self.allProducts.forEach(function (entry) {\n                  if (entry.packing_type == 'TABLETS') {\n                    var quantity = {\n                      tablets: Number(entry.quantity_tablets),\n                      strips: Number(entry.quantity_strips),\n                      totaltablets: Number(entry.dispensed_total)\n                    };\n                    finalProducts.push({\n                      clinicId: self.data.clinicId,\n                      productId: entry.productId,\n                      quantity: JSON.stringify(quantity),\n                      packing_type: entry.packing_type\n                    });\n                  }\n\n                  if (entry.packing_type == 'Per vial' || entry.packing_type == 'per vial' || entry.packing_type == 'Vial / per cc' || entry.packing_type == 'Vial / per 0.5 cc' || entry.packing_type == 'vial per cc') {\n                    var quantity = {\n                      vials: Number(entry.quantity_vials),\n                      mls: Number(entry.quantity_mls),\n                      totalmls: Number(entry.dispensed_total)\n                    };\n                    finalProducts.push({\n                      clinicId: self.data.clinicId,\n                      productId: entry.productId,\n                      quantity: JSON.stringify(quantity),\n                      packing_type: entry.packing_type\n                    });\n                  }\n\n                  if (entry.packing_type == 'per ampule') {\n                    var quantity = {\n                      ampules: Number(entry.quantity_ampules),\n                      totalampules: Number(entry.dispensed_total)\n                    };\n                    finalProducts.push({\n                      clinicId: self.data.clinicId,\n                      productId: entry.productId,\n                      quantity: JSON.stringify(quantity),\n                      packing_type: entry.packing_type\n                    });\n                  }\n\n                  if (entry.packing_type == 'BOTTLE') {\n                    var quantity = {\n                      bottles: Number(entry.quantity_bottles),\n                      unittotal: Number(entry.quantity_unittotal),\n                      totalunits: Number(entry.dispensed_total)\n                    };\n                    finalProducts.push({\n                      clinicId: self.data.clinicId,\n                      productId: entry.productId,\n                      quantity: JSON.stringify(quantity),\n                      packing_type: entry.packing_type\n                    });\n                  }\n\n                  if (entry.packing_type == 'TUBE') {\n                    var quantity = {\n                      tubes: Number(entry.quantity_tubes),\n                      unittotal: Number(entry.quantity_unittotal),\n                      totalunits: Number(entry.dispensed_total)\n                    };\n                    finalProducts.push({\n                      clinicId: self.data.clinicId,\n                      productId: entry.productId,\n                      quantity: JSON.stringify(quantity),\n                      packing_type: entry.packing_type\n                    });\n                  }\n\n                  if (entry.packing_type == 'Per supp' || entry.packing_type == 'SACHET' || entry.packing_type == 'Sachet' || entry.packing_type == 'box' || entry.packing_type == 'Set' || entry.packing_type == 'ROLLS' || entry.packing_type == 'PIECES' || entry.packing_type == 'pack' || entry.packing_type == 'Diskus') {\n                    var quantity = {\n                      units: Number(entry.quantity_units),\n                      totalunits: Number(entry.dispensed_total)\n                    };\n                    finalProducts.push({\n                      clinicId: self.data.clinicId,\n                      productId: entry.productId,\n                      quantity: JSON.stringify(quantity),\n                      packing_type: entry.packing_type\n                    });\n                  }\n\n                  index++;\n                });\n\n                if (!(index == length)) {\n                  _context3.next = 15;\n                  break;\n                }\n\n                _context3.prev = 6;\n                _context3.next = 9;\n                return this.axios.post('https://backend.medicodesolution.com/development/rollback/checkout/' + this.checkOutId, {\n                  finalProducts: finalProducts\n                }).then(function (response) {\n                  if (response.status == 200 && response.data.success) {\n                    self.isLoading = false;\n                    Messenger().post({\n                      message: response.data.success,\n                      hideAfter: 3,\n                      showCloseButton: true\n                    });\n                    return self.navigateToDashboard();\n                  } else {\n                    if (response.data.error) {\n                      self.isLoading = false;\n                      Messenger().post({\n                        type: 'error',\n                        message: response.data.error,\n                        hideAfter: 3,\n                        showCloseButton: true\n                      });\n                      return self.navigateToDashboard();\n                    } else {\n                      self.isLoading = false;\n                      Messenger().post({\n                        type: 'error',\n                        message: response.error,\n                        hideAfter: 3,\n                        showCloseButton: true\n                      });\n                      return self.navigateToDashboard();\n                    }\n                  }\n                }).catch(function (error) {\n                  self.isLoading = false;\n                  Messenger().post({\n                    type: 'error',\n                    message: error,\n                    hideAfter: 3,\n                    showCloseButton: true\n                  });\n                  return self.navigateToDashboard();\n                });\n\n              case 9:\n                response = _context3.sent;\n                _context3.next = 15;\n                break;\n\n              case 12:\n                _context3.prev = 12;\n                _context3.t0 = _context3[\"catch\"](6);\n                console.error(_context3.t0);\n\n              case 15:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[6, 12]]);\n      }));\n\n      return function rollbackStock() {\n        return _rollbackStock.apply(this, arguments);\n      };\n    }()\n  },\n  mounted: function mounted() {\n    this.getCheckOut();\n    this.getAccount();\n  },\n  created: function created() {\n    initializationMessengerCode();\n    Messenger.options = {\n      extraClasses: this.locationClasses,\n      theme: 'air',\n      showCloseButton: true\n    };\n  }\n};",{"version":3,"sources":["CheckOutView.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <ol class=\"breadcrumb\">\r\n      <li class=\"breadcrumb-item\">YOU ARE HERE</li>\r\n      <li class=\"breadcrumb-item active\">Check Out Dashboard </li>\r\n    </ol>\r\n\r\n\r\n    <b-row>\r\n      <b-col md=\"8\" xs=\"12\">\r\n        <b-tabs class=\"mb-lg\">\r\n          <b-tab title=\"Information\" active>\r\n                 <fieldset>\r\n   <legend>Complete Information</legend>\r\n\r\n    <div class=\"mb-lg\">\r\n            <h3 class=\"text-success mb-0\">{{clinicName}}</h3>\r\n           Clinic\r\n          </div>\r\n\r\n       <div class=\"mb-lg\">\r\n            <h3 class=\"text-success mb-0\">{{data.patientId}}</h3>\r\n            Patient Identification number\r\n          </div>\r\n           <div class=\"mb-lg\">\r\n            <h3 class=\"text-success mb-0\">{{data.total_amount}}</h3>\r\n          Total Amount (RM)\r\n          </div>\r\n              <div class=\"mb-lg\">\r\n            <h3 class=\"text-success mb-0\">{{data.staffId}}</h3>\r\n          Staff Id\r\n          </div>\r\n            <div class=\"mb-lg\" v-if=\"data.rollback=='true'\">\r\n            <h3 class=\"text-success mb-0\">ROLLED BACK</h3>\r\n          On {{data.update_time}}\r\n          </div>\r\n\r\n               <b-button type=\"submit\" variant=\"danger\" class=\"btn-rounded\" v-if=\"isLoading==false && data.rollback!='true'\" @click=\"rollbackStock\">\r\n              Rollback Completely\r\n              </b-button>\r\n                 </fieldset>\r\n          </b-tab>\r\n         \r\n        \r\n          \r\n          <table  class=\"table table-bordered table-lg mt-lg mb-0\" v-if=\"data.allProducts.length!=0\">\r\n              <thead>\r\n                <tr>\r\n                  <th class=\"hidden-sm-down\">Num.</th>\r\n                  <th>Product Name</th>\r\n                  <th>Product Type</th>\r\n                  <th class=\"hidden-sm-down\">Brand</th>\r\n                   <th class=\"\">Packing Type</th>\r\n                  <th class=\"\">Dispensed Qty</th>\r\n                 \r\n                </tr>\r\n              </thead>\r\n                  <tbody>\r\n               <tr v-for=\"(product,index) in allProducts\" :key=\"product.product_name\">\r\n                  <td>{{index+1}}</td>\r\n                  <td> <b-badge variant=\"success\" class=\"text-gray-dark\">{{product.product_name}}</b-badge></td>\r\n                   <td>{{product.product_category}}</td>\r\n                    <td>{{product.manufacturer}}</td>\r\n                    <td>{{product.packing_type}}</td>\r\n                        <td v-if=\"product.packing_type=='TABLETS'\"> \r\n                          <span v-if=\"product.quantity_strips==0 && product.quantity_tablets!=0\">{{product.quantity_tablets}} tablets</span>\r\n                         <span v-if=\"product.quantity_strips!=0 && product.quantity_tablets==0\">{{product.quantity_strips}} strips</span>\r\n                  <span v-if=\"product.quantity_strips!=0 && product.quantity_tablets!=0\">  {{product.quantity_strips}} strips  &amp; {{product.quantity_tablets}} loose tablets</span>\r\n                          \r\n                        </td>\r\n                  <td v-if=\"product.packing_type=='Vial / per cc' || product.packing_type=='Vial / per 0.5 cc' || product.packing_type=='per vial' || product.packing_type=='Per vial' || product.packing_type=='vial per cc'\">\r\n                   <span v-if=\"product.quantity_mls==0 && product.quantity_vials!=0\">{{product.quantity_vials}} vials</span>\r\n                         <span v-if=\"product.quantity_mls!=0 && product.quantity_vials==0\">{{product.quantity_mls}} loose ML</span>\r\n                  <span v-if=\"product.quantity_mls!=0 && product.quantity_vials!=0\"> {{product.quantity_mls}} loose ML &amp; {{product.quantity_vials}} vials</span>\r\n                \r\n                   \r\n                   </td>\r\n                         <td v-if=\"product.packing_type=='per ampule'\"> {{product.quantity_ampules}} ampules</td>\r\n\r\n                                         <td v-if=\"product.packing_type=='BOTTLE'\"> \r\n                                              <span v-if=\"product.quantity_unittotal==0 && product.quantity_bottles!=0\">{{product.quantity_bottles}} bottles</span>\r\n                         <span v-if=\"product.quantity_unittotal!=0 && product.quantity_bottles==0\">{{product.quantity_unittotal}}{{product.quantity_unitperbottle}}/ loose</span>\r\n                  <span v-if=\"product.quantity_unittotal!=0 && product.quantity_bottles!=0\"> {{product.quantity_unittotal}}{{product.quantity_unitperbottle}}/ loose &amp; {{product.quantity_bottles}} bottles</span>\r\n                                           \r\n                                           \r\n                                             </td>\r\n                                                           <td v-if=\"product.packing_type=='TUBE'\"> \r\n                                              <span v-if=\"product.quantity_unittotal==0 && product.quantity_tubes!=0\">{{product.quantity_tubes}} tubes</span>\r\n                         <span v-if=\"product.quantity_unittotal!=0 && product.quantity_tubes==0\">{{product.quantity_unittotal}}{{product.quantity_unitpertube}}/ loose</span>\r\n                  <span v-if=\"product.quantity_unittotal!=0 && product.quantity_tubes!=0\"> {{product.quantity_unittotal}}{{product.quantity_unitpertube}}/ loose &amp; {{product.quantity_tubes}} tubes</span>\r\n                                           \r\n                                           \r\n                                             </td>\r\n                                           \r\n                                            \r\n                                            \r\n                                            \r\n                                             <td v-if=\"product.packing_type=='Per supp' || product.packing_type=='SACHET' || product.packing_type=='Sachet' || product.packing_type=='box' || product.packing_type=='Set' || product.packing_type=='ROLLS' || product.packing_type=='PIECES' || product.packing_type=='pack' || product.packing_type=='Diskus' \">  {{product.quantity_units}} units </td>\r\n                   \r\n                </tr>\r\n              </tbody>\r\n            </table> \r\n          \r\n          \r\n        </b-tabs>\r\n      </b-col>\r\n      <b-col lg='8' xs='12'>\r\n       \r\n\r\n      \r\n      </b-col>\r\n    </b-row>\r\n    \r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport 'imports-loader?$=jquery,this=>window!messenger/build/js/messenger'; // eslint-disable-line\r\nimport Widget from '@/components/Widget/Widget';\r\nimport vSelect from 'vue-select';\r\nimport mock from './mock';\r\nconst { Messenger } = window;\r\n\r\n/* eslint-disable */\r\nfunction initializationMessengerCode() {\r\n  (function () {\r\n    let $,\r\n      FlatMessage,\r\n      spinner_template,\r\n      __hasProp = {}.hasOwnProperty,\r\n      __extends = function (child, parent) {\r\n        for (const key in parent) {\r\n          if (__hasProp.call(parent, key)) child[key] = parent[key];\r\n        }\r\n\r\n        function ctor() {\r\n          this.constructor = child;\r\n        }\r\n\r\n        ctor.prototype = parent.prototype;\r\n        child.prototype = new ctor();\r\n        child.__super__ = parent.prototype;\r\n        return child;\r\n      };\r\n\r\n    $ = jQuery;\r\n\r\n    spinner_template = '<div class=\"messenger-spinner\">\\n    <span class=\"messenger-spinner-side messenger-spinner-side-left\">\\n        <span class=\"messenger-spinner-fill\"></span>\\n    </span>\\n    <span class=\"messenger-spinner-side messenger-spinner-side-right\">\\n        <span class=\"messenger-spinner-fill\"></span>\\n    </span>\\n</div>';\r\n\r\n    FlatMessage = (function (_super) {\r\n      __extends(FlatMessage, _super);\r\n\r\n      function FlatMessage() {\r\n        return FlatMessage.__super__.constructor.apply(this, arguments);\r\n      }\r\n\r\n      FlatMessage.prototype.template = function (opts) {\r\n        let $message;\r\n        $message = FlatMessage.__super__.template.apply(this, arguments);\r\n        $message.append($(spinner_template));\r\n        return $message;\r\n      };\r\n\r\n      return FlatMessage;\r\n    }(Messenger.Message));\r\n\r\n    Messenger.themes.air = {\r\n      Message: FlatMessage,\r\n    };\r\n  }).call(window);\r\n}\r\n/* eslint-enable */\r\n\r\n\r\nexport default {\r\n  name: 'FormValidation',\r\n  components: { Widget,vSelect },\r\n  data() {\r\n    return {\r\n        clinicId: this.$route.params.clinicId,\r\n      clinicName:'',\r\n            mock,\r\n      data:{\r\n        attachments:[]\r\n      },\r\n      allProducts:new Array(),\r\n      checkOutId: this.$route.params.checkOutId,\r\n      isLoading:false,\r\n      locationClasses: 'messenger-fixed messenger-on-top messenger-on-right',\r\n    };\r\n  },\r\n  \r\n  methods: {\r\n       async getAccount() {\r\n  try {\r\n   const response = await this.axios.get('https://backend.medicodesolution.com/development/clinic/'+ this.clinicId)\r\n   this.clinicName= response.data.accountInfo[0].name;\r\n    \r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n},\r\n      navigateToDashboard(){\r\n        this.$router.push({name:'Dashboard' });\r\n    },\r\n   async getCheckOut() {\r\n  try {\r\n   const response = await this.axios.get('https://backend.medicodesolution.com/development/checkout/'+ this.checkOutId)\r\n   this.data = response.data.checkOutInfo[0];\r\n  this.allProducts = JSON.parse(this.data.allProducts);\r\n \r\n \r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n},\r\n async rollbackStock() {\r\n  var self=this;\r\n      var finalProducts = new Array();\r\n\r\n  var index=0;var length = self.allProducts.length;\r\n \r\n//  console.log(this.allSelectedProducts);\r\n   self.allProducts.forEach(function(entry) {\r\n   \r\n   \r\n    \r\n if(entry.packing_type=='TABLETS'){\r\n  var quantity = {\r\n     tablets:Number(entry.quantity_tablets),\r\n     strips:Number(entry.quantity_strips),\r\n     totaltablets:Number(entry.dispensed_total)\r\n   };\r\n finalProducts.push({clinicId:self.data.clinicId,productId:entry.productId,quantity:JSON.stringify(quantity),packing_type:entry.packing_type});\r\n   }\r\n    if(entry.packing_type=='Per vial' || entry.packing_type=='per vial' || entry.packing_type=='Vial / per cc' || entry.packing_type=='Vial / per 0.5 cc' || entry.packing_type=='vial per cc'){\r\n  var quantity = {\r\n    \r\n     vials:Number(entry.quantity_vials),\r\n     mls:Number(entry.quantity_mls),\r\n    totalmls:Number(entry.dispensed_total)\r\n   };\r\n finalProducts.push({clinicId:self.data.clinicId,productId:entry.productId,quantity:JSON.stringify(quantity),packing_type:entry.packing_type});\r\n   }\r\n     if(entry.packing_type=='per ampule'){\r\n  var quantity = {\r\n    ampules:Number(entry.quantity_ampules),\r\n    totalampules:Number(entry.dispensed_total)\r\n   };\r\n finalProducts.push({clinicId:self.data.clinicId,productId:entry.productId,quantity:JSON.stringify(quantity),packing_type:entry.packing_type});\r\n   }\r\n        if(entry.packing_type=='BOTTLE'){\r\n  var quantity = {\r\n\r\n     bottles:Number(entry.quantity_bottles),\r\n     unittotal:Number(entry.quantity_unittotal),\r\n    totalunits:Number(entry.dispensed_total)\r\n   };\r\n  finalProducts.push({clinicId:self.data.clinicId,productId:entry.productId,quantity:JSON.stringify(quantity),packing_type:entry.packing_type});\r\n   }\r\n     if(entry.packing_type=='TUBE'){\r\n  var quantity = {\r\n    tubes:Number(entry.quantity_tubes),\r\n     unittotal:Number(entry.quantity_unittotal),\r\n    totalunits:Number(entry.dispensed_total)\r\n   };\r\n finalProducts.push({clinicId:self.data.clinicId,productId:entry.productId,quantity:JSON.stringify(quantity),packing_type:entry.packing_type});\r\n   }\r\n\r\n      if(entry.packing_type=='Per supp' || entry.packing_type=='SACHET' || entry.packing_type=='Sachet' || entry.packing_type=='box' || entry.packing_type=='Set' || entry.packing_type=='ROLLS' || entry.packing_type=='PIECES' || entry.packing_type=='pack' || entry.packing_type=='Diskus'){\r\n  var quantity = {\r\n     units:Number(entry.quantity_units),\r\n    totalunits:Number(entry.dispensed_total)\r\n   };\r\n finalProducts.push({clinicId:self.data.clinicId,productId:entry.productId,quantity:JSON.stringify(quantity),packing_type:entry.packing_type});\r\n   }\r\n\r\n\r\n\r\n\r\n \r\n\r\n  \r\n    index++;\r\n});\r\n\r\n if(index==length){\r\ntry {\r\n   const response = await this.axios.post('https://backend.medicodesolution.com/development/rollback/checkout/'+ this.checkOutId, {\r\n          finalProducts:finalProducts,\r\n    })\r\n                .then(function (response) {\r\n           \r\n                if(response.status == 200 && response.data.success){\r\n                                   self.isLoading = false;\r\n                   Messenger().post({message:response.data.success, hideAfter: 3,showCloseButton:true});\r\n                   return self.navigateToDashboard();\r\n         \r\n                }\r\n                else {\r\n                  if(response.data.error){\r\n                    self.isLoading = false;\r\n                 Messenger().post({ type:'error',message :response.data.error, hideAfter: 3,showCloseButton:true});\r\n              return self.navigateToDashboard();\r\n                  }\r\n                 else {\r\n                   self.isLoading = false;\r\n               Messenger().post({ type:'error',message :response.error, hideAfter: 3,showCloseButton:true});\r\n                   return self.navigateToDashboard();\r\n                   }\r\n                }\r\n                })\r\n                .catch(function (error) {\r\n                self.isLoading = false;\r\n                 Messenger().post({ type:'error',message :error, hideAfter: 3,showCloseButton:true}); \r\n                     return self.navigateToDashboard();               \r\n                }); \r\n \r\n \r\n \r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n }\r\n  \r\n}\r\n  },\r\n   mounted(){\r\n     this.getCheckOut();\r\n         \r\n        this.getAccount();  \r\n  \r\n      \r\n   },\r\n     created() {\r\n    initializationMessengerCode();\r\n    Messenger.options = {\r\n      extraClasses: this.locationClasses,\r\n      theme: 'air',\r\n      showCloseButton: true,\r\n    };\r\n  \r\n  },\r\n};\r\n</script>\r\n"],"sourceRoot":"src\\pages\\Accounts"}]}