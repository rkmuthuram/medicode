{"remainingRequest":"F:\\antorse\\dbc-asia-phase2\\STAGING_dbc_phase_2\\dbc_phase2_staging\\physioPortal\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\antorse\\dbc-asia-phase2\\STAGING_dbc_phase_2\\dbc_phase2_staging\\physioPortal\\src\\pages\\Bookings\\Scheduling.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\antorse\\dbc-asia-phase2\\STAGING_dbc_phase_2\\dbc_phase2_staging\\physioPortal\\src\\pages\\Bookings\\Scheduling.vue","mtime":1595173309098},{"path":"F:\\antorse\\dbc-asia-phase2\\STAGING_dbc_phase_2\\dbc_phase2_staging\\physioPortal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1591157758729},{"path":"F:\\antorse\\dbc-asia-phase2\\STAGING_dbc_phase_2\\dbc_phase2_staging\\physioPortal\\node_modules\\babel-loader\\lib\\index.js","mtime":1591157735766},{"path":"F:\\antorse\\dbc-asia-phase2\\STAGING_dbc_phase_2\\dbc_phase2_staging\\physioPortal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1591157758729},{"path":"F:\\antorse\\dbc-asia-phase2\\STAGING_dbc_phase_2\\dbc_phase2_staging\\physioPortal\\node_modules\\vue-loader\\lib\\index.js","mtime":1591157760591}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport 'pretty-checkbox/src/pretty-checkbox.scss';\r\nimport Widget from '@/components/Widget/Widget';\r\nimport Vue from 'vue';\r\nimport PrettyCheckbox from 'pretty-checkbox-vue';\r\nimport vSelect from 'vue-select';\r\nimport moment from 'moment';\r\nexport default {\r\n  name: 'FormValidation',\r\n  components: { Widget,PrettyCheckbox,vSelect,moment},\r\n  data() {\r\n    return {\r\n      onDutyCount:0,\r\n      notOnDutyCount:0,\r\n      onDutyPercentage:0,\r\n      updateMode:false,\r\n      capacity:{},\r\n      entry:[{\r\n                date:'',\r\n               sessions: [\r\n                        {\r\n                            id: '1a',\r\n                            label: '08:00 AM',\r\n                            value:'08:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                        {\r\n                            id: '1b',\r\n                            label: '09:00 AM',\r\n                            value:'09:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1c',\r\n                            label: '10:00 AM',\r\n                            value:'10:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1d',\r\n                            label: '11:00 AM',\r\n                            value:'11:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1e',\r\n                            label: '12:00 PM',\r\n                            value:'12:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1f',\r\n                            label: '01:00 PM',\r\n                            value:'13:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1g',\r\n                            label: '02:00 PM',\r\n                            value:'14:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1h',\r\n                            label: '03:00 PM',\r\n                            value:'15:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1i',\r\n                            label: '04:00 PM',\r\n                            value:'16:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1j',\r\n                            label: '05:00 PM',\r\n                            value:'17:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1k',\r\n                            label: '06:00 PM',\r\n                            value:'18:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1l',\r\n                            label: '07:00 PM',\r\n                            value:'19:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1m',\r\n                            label: '08:00 PM',\r\n                            value:'20:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                     \r\n                    ],\r\n        \r\n \r\n      }],\r\n      data:{\r\n      sessions:{\r\n        physio:[]\r\n      }\r\n        \r\n      },\r\n      selection:{\r\n        branch:'',\r\n        year:'',\r\n        month:''\r\n      },\r\n      dates:[],\r\n         years: [\r\n                        {\r\n                            label: '2020',\r\n                            Year:2020\r\n                        },\r\n                        {\r\n                            label: '2021',\r\n                            Year:2021\r\n                        }\r\n                    ],\r\n        months: [\r\n                        {\r\n                            label: 'January',\r\n                            Month:0\r\n                        },\r\n                        {\r\n                            label: 'February',\r\n                            Month:1\r\n                        },\r\n                         {\r\n                            label: 'March',\r\n                            Month:2\r\n                        },\r\n                         {\r\n                            label: 'April',\r\n                            Month:3\r\n                        },\r\n                        {\r\n                            label: 'May',\r\n                            Month:4\r\n                        },\r\n                       {\r\n                            label: 'June',\r\n                            Month:5\r\n                        },\r\n                      {\r\n                            label: 'July',\r\n                            Month:6\r\n                        },\r\n                       {\r\n                            label: 'August',\r\n                            Month:7\r\n                        },\r\n                        {\r\n                            label: 'September',\r\n                            Month:8\r\n                        },\r\n                        {\r\n                            label: 'October',\r\n                            Month:9\r\n                        },\r\n                         {\r\n                            label: 'November',\r\n                            Month:10\r\n                        },\r\n                       {\r\n                            label: 'December',\r\n                            Month:11\r\n                        },\r\n                         \r\n                    ],\r\n          physioInfo:[],\r\n          \r\n    };\r\n  },\r\n  methods: {\r\n    updateSchedule(){\r\n\r\n     var self=this;\r\n   \r\n         self.axios.patch('https://staging-app-dot-dbc-asia-269419.appspot.com/bookingsAvailibility', {\r\n                  year:self.selection.year.Year,\r\n                  month:self.selection.month.Month,\r\n                  branch:self.selection.branch,\r\n                  data:self.entry,\r\n                  data2:self.capacity\r\n                })\r\n                .then(function (response) {\r\n                if(response.status == 200 && response.data.success){\r\n                self.isLoading = false;\r\n         \r\n            return Messenger().post({message:response.data.success, hideAfter: 3,showCloseButton:true});\r\n              \r\n                }\r\n                else {\r\n                  if(response.data.error){\r\n                    self.isLoading = false;\r\n                  return Messenger().post({ type:'error',message :response.data.error, hideAfter: 3,showCloseButton:true});\r\n          \r\n                  }\r\n                 else {\r\n                   self.isLoading = false;\r\n                 return Messenger().post({ type:'error',message :response.error, hideAfter: 3,showCloseButton:true});\r\n                   }\r\n                }\r\n                })\r\n                .catch(function (error) {\r\n                  self.isLoading = false;\r\n                  return Messenger().post({ type:'error',message :error, hideAfter: 3,showCloseButton:true});                \r\n                }); \r\n\r\n\r\n    },\r\n    submitSchedule(){\r\n    \r\n  var self=this;\r\n   \r\n         self.axios.post('https://staging-app-dot-dbc-asia-269419.appspot.com/bookingsAvailibility', {\r\n                  year:self.selection.year.Year,\r\n                  month:self.selection.month.Month,\r\n                  branch:self.selection.branch,\r\n                  data:self.entry,\r\n                  data2:self.capacity\r\n                })\r\n                .then(function (response) {\r\n                if(response.status == 200 && response.data.success){\r\n                self.isLoading = false;\r\n                self.getSchedule();\r\n            return Messenger().post({message:response.data.success, hideAfter: 3,showCloseButton:true});\r\n              \r\n                }\r\n                else {\r\n                  if(response.data.error){\r\n                    self.isLoading = false;\r\n                  return Messenger().post({ type:'error',message :response.data.error, hideAfter: 3,showCloseButton:true});\r\n          \r\n                  }\r\n                 else {\r\n                   self.isLoading = false;\r\n                 return Messenger().post({ type:'error',message :response.error, hideAfter: 3,showCloseButton:true});\r\n                   }\r\n                }\r\n                })\r\n                .catch(function (error) {\r\n                  self.isLoading = false;\r\n                  return Messenger().post({ type:'error',message :error, hideAfter: 3,showCloseButton:true});                \r\n                }); \r\n\r\n    },\r\n      checkCapacity(entryIndex,sessionIndex,staffId){\r\n \r\n      if(this.capacity[entryIndex+'_'+sessionIndex+'_'+staffId]==false || this.capacity[entryIndex+'_'+sessionIndex+'_'+staffId]==undefined){\r\n      \r\n        this.entry[entryIndex].sessions[sessionIndex].capacity[staffId] = false;\r\n      }\r\n      else {\r\n     \r\n        this.entry[entryIndex].sessions[sessionIndex].capacity[staffId] = true;\r\n      }\r\n      \r\n    },\r\ngetOnDutyCount(entryIndex,sessionIndex){\r\n  var capacity =  this.entry[entryIndex].sessions[sessionIndex].capacity;\r\n  return capacity.filter(Boolean).length-1;\r\n},\r\ngetStyle(entryIndex,sessionIndex){\r\n  var capacity =  this.entry[entryIndex].sessions[sessionIndex].capacity;\r\n  var onDuty = capacity.filter(Boolean).length-1;\r\n  var totalPhysios = this.physioInfo.length;\r\n  var percentage = (onDuty/totalPhysios)*100;\r\n  if(percentage<50){\r\n    return \"background-color:#FF0000\";\r\n  }\r\n  else return \"background-color:#00FF00\";\r\n},\r\ngetOnDutyCountPercentage(entryIndex,sessionIndex){\r\n  var capacity =  this.entry[entryIndex].sessions[sessionIndex].capacity;\r\n  var onDuty = capacity.filter(Boolean).length-1;\r\n  var totalPhysios = this.physioInfo.length;\r\n  var percentage = (onDuty/totalPhysios)*100;\r\n  return percentage;\r\n},\r\ngetNotOnDutyCount(entryIndex,sessionIndex){\r\n  var capacity =  this.entry[entryIndex].sessions[sessionIndex].capacity;\r\n  var onDuty = capacity.filter(Boolean).length-1;\r\n  return this.physioInfo.length - onDuty;\r\n},\r\ngetDaysInMonthUTC(month, year) {\r\n\r\n  var i=0;\r\n  var date = new Date(Date.UTC(year, month, 1));\r\n  var days = [];\r\n  while (date.getUTCMonth() === month) {\r\n  //  console.log(i);\r\n    // days.push(new Date(date));\r\n       if(i==0){\r\n      \r\n      this.entry[i] =  {\r\n                date:'',\r\n               sessions: [\r\n                        {\r\n                            id: '1a',\r\n                            label: '08:00 AM',\r\n                            value:'08:00',\r\n                            capacity:[{\r\n\r\n                            }]\r\n                        },\r\n                        {\r\n                            id: '1b',\r\n                            label: '09:00 AM',\r\n                            value:'09:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1c',\r\n                            label: '10:00 AM',\r\n                            value:'10:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1d',\r\n                            label: '11:00 AM',\r\n                            value:'11:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1e',\r\n                            label: '12:00 PM',\r\n                            value:'12:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1f',\r\n                            label: '01:00 PM',\r\n                            value:'13:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1g',\r\n                            label: '02:00 PM',\r\n                            value:'14:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1h',\r\n                            label: '03:00 PM',\r\n                            value:'15:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1i',\r\n                            label: '04:00 PM',\r\n                            value:'16:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1j',\r\n                            label: '05:00 PM',\r\n                            value:'17:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1k',\r\n                            label: '06:00 PM',\r\n                            value:'18:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1l',\r\n                            label: '07:00 PM',\r\n                            value:'19:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1m',\r\n                            label: '08:00 PM',\r\n                            value:'20:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                     \r\n                    ],\r\n        \r\n \r\n      };\r\n    }\r\n    if(this.entry[i]===undefined){\r\n      \r\n      this.entry[i] =  {\r\n                date:'',\r\n               sessions: [\r\n                        {\r\n                            id: '1a',\r\n                            label: '08:00 AM',\r\n                            value:'08:00',\r\n                            capacity:[{\r\n\r\n                            }]\r\n                        },\r\n                        {\r\n                            id: '1b',\r\n                            label: '09:00 AM',\r\n                            value:'09:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1c',\r\n                            label: '10:00 AM',\r\n                            value:'10:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1d',\r\n                            label: '11:00 AM',\r\n                            value:'11:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1e',\r\n                            label: '12:00 PM',\r\n                            value:'12:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1f',\r\n                            label: '01:00 PM',\r\n                            value:'13:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1g',\r\n                            label: '02:00 PM',\r\n                            value:'14:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1h',\r\n                            label: '03:00 PM',\r\n                            value:'15:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1i',\r\n                            label: '04:00 PM',\r\n                            value:'16:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1j',\r\n                            label: '05:00 PM',\r\n                            value:'17:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1k',\r\n                            label: '06:00 PM',\r\n                            value:'18:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1l',\r\n                            label: '07:00 PM',\r\n                            value:'19:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1m',\r\n                            label: '08:00 PM',\r\n                            value:'20:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                     \r\n                    ],\r\n        \r\n \r\n      };\r\n    }\r\n     this.entry[i].date = new Date(date);\r\n     i++;\r\n    date.setUTCDate(date.getUTCDate() + 1);\r\n   \r\n  }\r\n  return days;\r\n},\r\n\r\n   async getSchedule() {\r\n     this.updateMode = false;\r\n     this.capacity= {};\r\n     this.entry = [{\r\n                date:'',\r\n               sessions: [\r\n                        {\r\n                            id: '1a',\r\n                            label: '08:00 AM',\r\n                            value:'08:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                        {\r\n                            id: '1b',\r\n                            label: '09:00 AM',\r\n                            value:'09:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1c',\r\n                            label: '10:00 AM',\r\n                            value:'10:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1d',\r\n                            label: '11:00 AM',\r\n                            value:'11:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1e',\r\n                            label: '12:00 PM',\r\n                            value:'12:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1f',\r\n                            label: '01:00 PM',\r\n                            value:'13:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1g',\r\n                            label: '02:00 PM',\r\n                            value:'14:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1h',\r\n                            label: '03:00 PM',\r\n                            value:'15:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1i',\r\n                            label: '04:00 PM',\r\n                            value:'16:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1j',\r\n                            label: '05:00 PM',\r\n                            value:'17:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1k',\r\n                            label: '06:00 PM',\r\n                            value:'18:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1l',\r\n                            label: '07:00 PM',\r\n                            value:'19:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1m',\r\n                            label: '08:00 PM',\r\n                            value:'20:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                     \r\n                    ],\r\n        \r\n \r\n      }];\r\n  try {\r\n   const response = await this.axios.get('https://staging-app-dot-dbc-asia-269419.appspot.com/bookingsAvailibility/' + this.selection.year.Year + '/' + this.selection.month.Month + '/' + this.selection.branch);\r\n   if(response.data.error){\r\n  var check = this.getDaysInMonthUTC(this.selection.month.Month,this.selection.year.Year);\r\n  try {\r\n\r\n   const response = await this.axios.get('https://staging-app-dot-dbc-asia-269419.appspot.com/physio/branch/' + this.selection.branch)\r\n   this.physioInfo = response.data.physioInfo;\r\n\r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n   }\r\n   else{\r\n     this.updateMode=true;\r\n  \r\n     this.entry = JSON.parse(response.data.scheduleInfo[0].temp_data1);\r\n     this.capacity = JSON.parse(response.data.scheduleInfo[0].temp_data2);\r\n\r\n\r\n   }\r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n\r\n},\r\nfilter (username){\r\n    return username.split(\" \")[0];\r\n},\r\ntoReadableDate(date){\r\n  \r\n var datee = moment(date).format('dddd , MMMM Do YYYY');\r\n \r\n return datee;\r\n}\r\n  },\r\nmounted(){\r\n  \r\n\r\n      \r\n   },\r\n};\r\n",{"version":3,"sources":["Scheduling.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;;;AAIA;AACA","file":"Scheduling.vue","sourceRoot":"src\\pages\\Bookings","sourcesContent":["<template>\r\n  <div>\r\n    <ol class=\"breadcrumb\">\r\n      <li class=\"breadcrumb-item\">YOU ARE HERE</li>\r\n      <li class=\"breadcrumb-item active\">Smart Scheduler</li>\r\n    </ol>\r\n\r\n\r\n    <b-row>\r\n\r\n      <b-col lg='12' xs='12'>\r\n        <Widget\r\n        \r\n        >\r\n           \r\n                            <v-select\r\n                                id=\"corestatus\"\r\n                                class=\"mt-xs\"\r\n                                placeholder=\"Branch\"\r\n                                :options=\"['Ampang','Bangi','Jalan Kuching','TTDI']\"\r\n                               v-model=\"selection.branch\"\r\n                               @change=\"getSchedule\"\r\n                            />\r\n                           <v-select :options=\"years\"    v-model=\"selection.year\"   placeholder=\"Year\"   @change=\"getSchedule\" label=\"label\" :value=\"Year\" >\r\n    <template slot=\"option\" slot-scope=\"option\">\r\n        {{ option.label }}\r\n    </template>\r\n  </v-select>\r\n  <v-select :options=\"months\"    v-model=\"selection.month\" placeholder=\"Month\"   @change=\"getSchedule\" label=\"label\" :value=\"Month\">\r\n    <template slot=\"option\" slot-scope=\"option\">\r\n        {{ option.label }}\r\n    </template>\r\n  </v-select>\r\n          \r\n                     \r\n              \r\n                     \r\n                            <br>\r\n                    <b-button variant=\"danger\" type=\"submit\" class=\"mr-xs\" v-if=\"selection.branch!='' && selection.year!='' && selection.month!='' && updateMode==true\" @click=\"updateSchedule()\">Update Schedule for {{selection.month.label}} / {{selection.year.Year}} / {{selection.branch}}</b-button>\r\n                      <b-button variant=\"danger\" type=\"submit\" class=\"mr-xs\" v-if=\"selection.branch!='' && selection.year!='' && selection.month!='' && updateMode==false\" @click=\"submitSchedule()\">Create Schedule for {{selection.month.label}} / {{selection.year.Year}} / {{selection.branch}}</b-button>\r\n                    <br>\r\n\r\n <table class=\"table table-striped\" v-if=\"selection.branch!='' && selection.year!='' && selection.month!=''\">\r\n              <thead>\r\n                <tr>\r\n                  <th class=\"hidden-sm-down\">Date</th>\r\n                  <th>TIMINGS</th>\r\n                  <th>PHYSIOS</th>\r\n                  <th class=\"hidden-sm-down\">SUMMARY</th>\r\n         \r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr v-for=\"(date,entryIndex) in entry\" >\r\n                  <td>{{entryIndex+1}})  {{ toReadableDate(entry[entryIndex].date) }}</td>\r\n                  <td>\r\n                   <table class=\"table\">\r\n              <thead>\r\n                <tr>\r\n                 \r\n                 \r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr v-for=\"session in entry[entryIndex].sessions\" >\r\n                  <td>{{session.label}}</td>\r\n\r\n                \r\n             \r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n                  </td>\r\n                  <td>\r\n                       <table class=\"table\">\r\n              <thead>\r\n                <tr>\r\n                 \r\n                 \r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr v-for=\"(session,sessionIndex) in entry[entryIndex].sessions\" >\r\n                 \r\n                  <td v-for=\"physio in physioInfo\"> <p-check class=\"p-switch p-fill\" v-model=\"capacity[entryIndex+'_'+sessionIndex+'_'+physio.id]\"  @change=\"checkCapacity(entryIndex,sessionIndex,physio.id)\"  >{{ filter(physio.username) }}</p-check>\r\n\r\n                  \r\n                 \r\n                  </td>\r\n             \r\n                \r\n             \r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n                  </td>\r\n               <td>\r\n                    \r\n                   <table class=\"table\">\r\n              <thead>\r\n                <tr>\r\n                 \r\n                 \r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                   <tr v-for=\"(session,sessionIndex) in entry[entryIndex].sessions\" >\r\n                                   <td :style=\"getStyle(entryIndex,sessionIndex)\">On Duty : {{getOnDutyCount(entryIndex,sessionIndex)}} | Unavailable : {{getNotOnDutyCount(entryIndex,sessionIndex)}} | Current Bookings : TBD | Capacity : {{getOnDutyCountPercentage(entryIndex,sessionIndex)}}% </td>\r\n                \r\n             \r\n                </tr>\r\n           \r\n              </tbody>\r\n            </table>\r\n               \r\n                   </td>\r\n             \r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n        </Widget>\r\n      </b-col>\r\n    </b-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport 'pretty-checkbox/src/pretty-checkbox.scss';\r\nimport Widget from '@/components/Widget/Widget';\r\nimport Vue from 'vue';\r\nimport PrettyCheckbox from 'pretty-checkbox-vue';\r\nimport vSelect from 'vue-select';\r\nimport moment from 'moment';\r\nexport default {\r\n  name: 'FormValidation',\r\n  components: { Widget,PrettyCheckbox,vSelect,moment},\r\n  data() {\r\n    return {\r\n      onDutyCount:0,\r\n      notOnDutyCount:0,\r\n      onDutyPercentage:0,\r\n      updateMode:false,\r\n      capacity:{},\r\n      entry:[{\r\n                date:'',\r\n               sessions: [\r\n                        {\r\n                            id: '1a',\r\n                            label: '08:00 AM',\r\n                            value:'08:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                        {\r\n                            id: '1b',\r\n                            label: '09:00 AM',\r\n                            value:'09:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1c',\r\n                            label: '10:00 AM',\r\n                            value:'10:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1d',\r\n                            label: '11:00 AM',\r\n                            value:'11:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1e',\r\n                            label: '12:00 PM',\r\n                            value:'12:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1f',\r\n                            label: '01:00 PM',\r\n                            value:'13:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1g',\r\n                            label: '02:00 PM',\r\n                            value:'14:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1h',\r\n                            label: '03:00 PM',\r\n                            value:'15:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1i',\r\n                            label: '04:00 PM',\r\n                            value:'16:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1j',\r\n                            label: '05:00 PM',\r\n                            value:'17:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1k',\r\n                            label: '06:00 PM',\r\n                            value:'18:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1l',\r\n                            label: '07:00 PM',\r\n                            value:'19:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1m',\r\n                            label: '08:00 PM',\r\n                            value:'20:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                     \r\n                    ],\r\n        \r\n \r\n      }],\r\n      data:{\r\n      sessions:{\r\n        physio:[]\r\n      }\r\n        \r\n      },\r\n      selection:{\r\n        branch:'',\r\n        year:'',\r\n        month:''\r\n      },\r\n      dates:[],\r\n         years: [\r\n                        {\r\n                            label: '2020',\r\n                            Year:2020\r\n                        },\r\n                        {\r\n                            label: '2021',\r\n                            Year:2021\r\n                        }\r\n                    ],\r\n        months: [\r\n                        {\r\n                            label: 'January',\r\n                            Month:0\r\n                        },\r\n                        {\r\n                            label: 'February',\r\n                            Month:1\r\n                        },\r\n                         {\r\n                            label: 'March',\r\n                            Month:2\r\n                        },\r\n                         {\r\n                            label: 'April',\r\n                            Month:3\r\n                        },\r\n                        {\r\n                            label: 'May',\r\n                            Month:4\r\n                        },\r\n                       {\r\n                            label: 'June',\r\n                            Month:5\r\n                        },\r\n                      {\r\n                            label: 'July',\r\n                            Month:6\r\n                        },\r\n                       {\r\n                            label: 'August',\r\n                            Month:7\r\n                        },\r\n                        {\r\n                            label: 'September',\r\n                            Month:8\r\n                        },\r\n                        {\r\n                            label: 'October',\r\n                            Month:9\r\n                        },\r\n                         {\r\n                            label: 'November',\r\n                            Month:10\r\n                        },\r\n                       {\r\n                            label: 'December',\r\n                            Month:11\r\n                        },\r\n                         \r\n                    ],\r\n          physioInfo:[],\r\n          \r\n    };\r\n  },\r\n  methods: {\r\n    updateSchedule(){\r\n\r\n     var self=this;\r\n   \r\n         self.axios.patch('https://staging-app-dot-dbc-asia-269419.appspot.com/bookingsAvailibility', {\r\n                  year:self.selection.year.Year,\r\n                  month:self.selection.month.Month,\r\n                  branch:self.selection.branch,\r\n                  data:self.entry,\r\n                  data2:self.capacity\r\n                })\r\n                .then(function (response) {\r\n                if(response.status == 200 && response.data.success){\r\n                self.isLoading = false;\r\n         \r\n            return Messenger().post({message:response.data.success, hideAfter: 3,showCloseButton:true});\r\n              \r\n                }\r\n                else {\r\n                  if(response.data.error){\r\n                    self.isLoading = false;\r\n                  return Messenger().post({ type:'error',message :response.data.error, hideAfter: 3,showCloseButton:true});\r\n          \r\n                  }\r\n                 else {\r\n                   self.isLoading = false;\r\n                 return Messenger().post({ type:'error',message :response.error, hideAfter: 3,showCloseButton:true});\r\n                   }\r\n                }\r\n                })\r\n                .catch(function (error) {\r\n                  self.isLoading = false;\r\n                  return Messenger().post({ type:'error',message :error, hideAfter: 3,showCloseButton:true});                \r\n                }); \r\n\r\n\r\n    },\r\n    submitSchedule(){\r\n    \r\n  var self=this;\r\n   \r\n         self.axios.post('https://staging-app-dot-dbc-asia-269419.appspot.com/bookingsAvailibility', {\r\n                  year:self.selection.year.Year,\r\n                  month:self.selection.month.Month,\r\n                  branch:self.selection.branch,\r\n                  data:self.entry,\r\n                  data2:self.capacity\r\n                })\r\n                .then(function (response) {\r\n                if(response.status == 200 && response.data.success){\r\n                self.isLoading = false;\r\n                self.getSchedule();\r\n            return Messenger().post({message:response.data.success, hideAfter: 3,showCloseButton:true});\r\n              \r\n                }\r\n                else {\r\n                  if(response.data.error){\r\n                    self.isLoading = false;\r\n                  return Messenger().post({ type:'error',message :response.data.error, hideAfter: 3,showCloseButton:true});\r\n          \r\n                  }\r\n                 else {\r\n                   self.isLoading = false;\r\n                 return Messenger().post({ type:'error',message :response.error, hideAfter: 3,showCloseButton:true});\r\n                   }\r\n                }\r\n                })\r\n                .catch(function (error) {\r\n                  self.isLoading = false;\r\n                  return Messenger().post({ type:'error',message :error, hideAfter: 3,showCloseButton:true});                \r\n                }); \r\n\r\n    },\r\n      checkCapacity(entryIndex,sessionIndex,staffId){\r\n \r\n      if(this.capacity[entryIndex+'_'+sessionIndex+'_'+staffId]==false || this.capacity[entryIndex+'_'+sessionIndex+'_'+staffId]==undefined){\r\n      \r\n        this.entry[entryIndex].sessions[sessionIndex].capacity[staffId] = false;\r\n      }\r\n      else {\r\n     \r\n        this.entry[entryIndex].sessions[sessionIndex].capacity[staffId] = true;\r\n      }\r\n      \r\n    },\r\ngetOnDutyCount(entryIndex,sessionIndex){\r\n  var capacity =  this.entry[entryIndex].sessions[sessionIndex].capacity;\r\n  return capacity.filter(Boolean).length-1;\r\n},\r\ngetStyle(entryIndex,sessionIndex){\r\n  var capacity =  this.entry[entryIndex].sessions[sessionIndex].capacity;\r\n  var onDuty = capacity.filter(Boolean).length-1;\r\n  var totalPhysios = this.physioInfo.length;\r\n  var percentage = (onDuty/totalPhysios)*100;\r\n  if(percentage<50){\r\n    return \"background-color:#FF0000\";\r\n  }\r\n  else return \"background-color:#00FF00\";\r\n},\r\ngetOnDutyCountPercentage(entryIndex,sessionIndex){\r\n  var capacity =  this.entry[entryIndex].sessions[sessionIndex].capacity;\r\n  var onDuty = capacity.filter(Boolean).length-1;\r\n  var totalPhysios = this.physioInfo.length;\r\n  var percentage = (onDuty/totalPhysios)*100;\r\n  return percentage;\r\n},\r\ngetNotOnDutyCount(entryIndex,sessionIndex){\r\n  var capacity =  this.entry[entryIndex].sessions[sessionIndex].capacity;\r\n  var onDuty = capacity.filter(Boolean).length-1;\r\n  return this.physioInfo.length - onDuty;\r\n},\r\ngetDaysInMonthUTC(month, year) {\r\n\r\n  var i=0;\r\n  var date = new Date(Date.UTC(year, month, 1));\r\n  var days = [];\r\n  while (date.getUTCMonth() === month) {\r\n  //  console.log(i);\r\n    // days.push(new Date(date));\r\n       if(i==0){\r\n      \r\n      this.entry[i] =  {\r\n                date:'',\r\n               sessions: [\r\n                        {\r\n                            id: '1a',\r\n                            label: '08:00 AM',\r\n                            value:'08:00',\r\n                            capacity:[{\r\n\r\n                            }]\r\n                        },\r\n                        {\r\n                            id: '1b',\r\n                            label: '09:00 AM',\r\n                            value:'09:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1c',\r\n                            label: '10:00 AM',\r\n                            value:'10:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1d',\r\n                            label: '11:00 AM',\r\n                            value:'11:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1e',\r\n                            label: '12:00 PM',\r\n                            value:'12:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1f',\r\n                            label: '01:00 PM',\r\n                            value:'13:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1g',\r\n                            label: '02:00 PM',\r\n                            value:'14:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1h',\r\n                            label: '03:00 PM',\r\n                            value:'15:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1i',\r\n                            label: '04:00 PM',\r\n                            value:'16:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1j',\r\n                            label: '05:00 PM',\r\n                            value:'17:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1k',\r\n                            label: '06:00 PM',\r\n                            value:'18:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1l',\r\n                            label: '07:00 PM',\r\n                            value:'19:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1m',\r\n                            label: '08:00 PM',\r\n                            value:'20:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                     \r\n                    ],\r\n        \r\n \r\n      };\r\n    }\r\n    if(this.entry[i]===undefined){\r\n      \r\n      this.entry[i] =  {\r\n                date:'',\r\n               sessions: [\r\n                        {\r\n                            id: '1a',\r\n                            label: '08:00 AM',\r\n                            value:'08:00',\r\n                            capacity:[{\r\n\r\n                            }]\r\n                        },\r\n                        {\r\n                            id: '1b',\r\n                            label: '09:00 AM',\r\n                            value:'09:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1c',\r\n                            label: '10:00 AM',\r\n                            value:'10:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1d',\r\n                            label: '11:00 AM',\r\n                            value:'11:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1e',\r\n                            label: '12:00 PM',\r\n                            value:'12:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1f',\r\n                            label: '01:00 PM',\r\n                            value:'13:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1g',\r\n                            label: '02:00 PM',\r\n                            value:'14:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1h',\r\n                            label: '03:00 PM',\r\n                            value:'15:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1i',\r\n                            label: '04:00 PM',\r\n                            value:'16:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1j',\r\n                            label: '05:00 PM',\r\n                            value:'17:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1k',\r\n                            label: '06:00 PM',\r\n                            value:'18:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1l',\r\n                            label: '07:00 PM',\r\n                            value:'19:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1m',\r\n                            label: '08:00 PM',\r\n                            value:'20:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                     \r\n                    ],\r\n        \r\n \r\n      };\r\n    }\r\n     this.entry[i].date = new Date(date);\r\n     i++;\r\n    date.setUTCDate(date.getUTCDate() + 1);\r\n   \r\n  }\r\n  return days;\r\n},\r\n\r\n   async getSchedule() {\r\n     this.updateMode = false;\r\n     this.capacity= {};\r\n     this.entry = [{\r\n                date:'',\r\n               sessions: [\r\n                        {\r\n                            id: '1a',\r\n                            label: '08:00 AM',\r\n                            value:'08:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                        {\r\n                            id: '1b',\r\n                            label: '09:00 AM',\r\n                            value:'09:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1c',\r\n                            label: '10:00 AM',\r\n                            value:'10:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1d',\r\n                            label: '11:00 AM',\r\n                            value:'11:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1e',\r\n                            label: '12:00 PM',\r\n                            value:'12:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1f',\r\n                            label: '01:00 PM',\r\n                            value:'13:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1g',\r\n                            label: '02:00 PM',\r\n                            value:'14:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1h',\r\n                            label: '03:00 PM',\r\n                            value:'15:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1i',\r\n                            label: '04:00 PM',\r\n                            value:'16:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1j',\r\n                            label: '05:00 PM',\r\n                            value:'17:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1k',\r\n                            label: '06:00 PM',\r\n                            value:'18:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1l',\r\n                            label: '07:00 PM',\r\n                            value:'19:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                         {\r\n                            id: '1m',\r\n                            label: '08:00 PM',\r\n                            value:'20:00',\r\n                            capacity:[{\r\n                              \r\n                            }]\r\n                        },\r\n                     \r\n                    ],\r\n        \r\n \r\n      }];\r\n  try {\r\n   const response = await this.axios.get('https://staging-app-dot-dbc-asia-269419.appspot.com/bookingsAvailibility/' + this.selection.year.Year + '/' + this.selection.month.Month + '/' + this.selection.branch);\r\n   if(response.data.error){\r\n  var check = this.getDaysInMonthUTC(this.selection.month.Month,this.selection.year.Year);\r\n  try {\r\n\r\n   const response = await this.axios.get('https://staging-app-dot-dbc-asia-269419.appspot.com/physio/branch/' + this.selection.branch)\r\n   this.physioInfo = response.data.physioInfo;\r\n\r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n   }\r\n   else{\r\n     this.updateMode=true;\r\n  \r\n     this.entry = JSON.parse(response.data.scheduleInfo[0].temp_data1);\r\n     this.capacity = JSON.parse(response.data.scheduleInfo[0].temp_data2);\r\n\r\n\r\n   }\r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n\r\n},\r\nfilter (username){\r\n    return username.split(\" \")[0];\r\n},\r\ntoReadableDate(date){\r\n  \r\n var datee = moment(date).format('dddd , MMMM Do YYYY');\r\n \r\n return datee;\r\n}\r\n  },\r\nmounted(){\r\n  \r\n\r\n      \r\n   },\r\n};\r\n</script>\r\n\r\n\r\n"]}]}