<template>
  <b-collapse class="sidebar-collapse" id="sidebar-collapse" :visible="sidebarOpened">
    <nav :class="{sidebar: true}">
      <header class="logo">
        <router-link to="/app/dashboard">
          KKA Clinic
          <span class="fw-semi-bold">Portal</span>
        </router-link>
      </header>
      <ul class="nav">
        <NavLink
          :activeItem="activeItem"
          header="Dashboard"
          link="/app/dashboard"
          iconName="flaticon-home"
          index="dashboard"
          isHeader
        />
        <NavLink
         v-if="position=='SuperAdmin' || staffAccess==true"
          :activeItem="activeItem"
          header="Accounts"
          link="/app/accountlisting"
          iconName="flaticon-plus"
          index="dashboard"
          isHeader
        />
          <NavLink
         v-if="position=='SuperAdmin' || staffAccess==true"
          :activeItem="activeItem"
          header="Staffs"
          link="/app/workforcelisting"
          iconName="flaticon-plus"
          index="dashboard"
          isHeader
        />
        <!--    <NavLink v-if="position != 'SuperAdmin'"
              :activeItem="activeItem"
              header="Bookings"
              link="/app/dashboard"
                 iconName="flaticon-list"
              index="dashboard"
              :childrenLinks="[
          { header: 'Center Bookings', link: '/app/bookingslistingcenter' },
          { header: 'My Bookings', link: '/app/bookingslistingpersonal' },
     ]"
        />-->

        <!--   <NavLink
              :activeItem="activeItem"
              header="Forms"
              link="/app/dashboard"
                 iconName="flaticon-list"
              index="dashboard"
              :childrenLinks="[
          { header: 'KPI Page Draft', link: '/app/physiokpi' },
          { header: 'Baseline Form', link: '/app/baseline' },
          { header: 'Personal Form', link: '/app/personal' },
          { header: 'Pre Information Form', link: '/app/preinformation' },
          { header: 'Acute Baseline Form', link: '/app/acutebaseline' },
          { header: 'Back Baseline Form', link: '/app/backbaseline' },
          { header: 'Neck Baseline Form', link: '/app/neckbaseline' },
          { header: 'Knee Baseline Form', link: '/app/kneebaseline' },                
          { header: 'Shoulder Baseline Form', link: '/app/shoulderbaseline' },
          { header: 'Back Protocol Form', link: '/app/backprotocol' },
          { header: 'SBL Form', link: '/app/sbl' },
          { header: 'Doctor Report Form', link: '/app/doctor_report' },
          { header: 'BackProtocol Report Form', link: '/app/backprotocol_report' },
          { header: 'Progress Report Form', link: '/app/progress_report' },
     
             
        ]"
        />-->
        <!--  <NavLink
              :activeItem="activeItem"
              header="Accidents"
              link="/app/accidentslisting"
            iconName="flaticon-map-location"
              index="dashboard"
              isHeader />
       <NavLink
              :activeItem="activeItem"
              header="Services"
              link="/app/serviceslisting"
              iconName="flaticon-diamond"
              index="dashboard"
              isHeader />
     <NavLink
              :activeItem="activeItem"
              header="Vehicles"
              link="/app/vehicleslisting"
             iconName="flaticon-paper-plane"
              index="dashboard"
              isHeader />
      <NavLink
              :activeItem="activeItem"
              header="Shop"
              link="/app/shoplisting"
             iconName="flaticon-list"
              index="dashboard"
              isHeader />
      <NavLink
              :activeItem="activeItem"
              header="Banners"
              link="/app/bannerslisting"
             iconName="flaticon-network"
              index="dashboard"
              isHeader />

        <!--  <NavLink
              :activeItem="activeItem"
              header="Create New Campaign"
              link="/app/createnewads"
              iconName="flaticon-plus   "
              index="dashboard"
              isHeader />
          <NavLink
              :activeItem="activeItem"
              header="Manage My Campaigns"
              link="/app/managemycampaigns"
              iconName="flaticon-network"
              index="dashboard"
              isHeader />
   
          <NavLink
              :activeItem="activeItem"
              header="Live Tracking"
              link="/app/livetracking"
              iconName="flaticon-map-location"
              index="dashboard"
              isHeader />
          <NavLink
              :activeItem="activeItem"
              header="Payment History"
              link="/app/paymenthistory"
              iconName="flaticon-diamond"
              index="dashboard"
              isHeader />
        -->

        <!--    <NavLink
              :activeItem="activeItem"
              header="Dashboard"
              link="/app/dashboard"
              iconName="flaticon-home"
              index="dashboard"
              :childrenLinks="[
          { header: 'Visits', link: '/app/dashboard/visits' },
          { header: 'Analytics', link: '/app/dashboard/analytics' },
          { header: 'Widgets', link: '/app/dashboard/widgets' },
        ]"
      /> 
      <NavLink
              :activeItem="activeItem"
              header="The Package"
              link="/app/package"
              iconName="flaticon-database-1"
              index="package"
              label="new"
              isHeader
      />
      <NavLink
              :activeItem="activeItem"
              header="Profile"
              link="/app/profile"
              iconName="flaticon-user"
              index="profile"
              isHeader
      />
      <NavLink
              :activeItem="activeItem"
              header="Email"
              link="/app/email"
              iconName="flaticon-paper-plane"
              index="email"
              badge="9"
              isHeader
      />
      <NavLink
              :activeItem="activeItem"
              header="E-commerce"
              link="/app/ecommerce"
              iconName="flaticon-diamond"
              index="ecommerce"
              :childrenLinks="[
          { header: 'Products Grid', link: '/app/ecommerce/products' },
          { header: 'Product Page', link: '/app/ecommerce/product' },
        ]"
      />
      <h5 class="navTitle">TEMPLATE</h5>
      <NavLink
              :activeItem="activeItem"
              header="Core"
              link="/app/core"
              iconName="flaticon-network"
              index="core"
              :childrenLinks="[
          { header: 'Typography', link: '/app/core/typography' },
          { header: 'Colors', link: '/app/core/colors' },
          { header: 'Grid', link: '/app/core/grid' },
        ]"
      />
      <NavLink
              :activeItem="activeItem"
              header="UI Elements"
              link="/app/ui"
              iconName="flaticon-layers"
              index="ui"
              :childrenLinks="[
          { header: 'Alerts', link: '/app/ui/alerts' },
          { header: 'Badge', link: '/app/ui/badge' },
          { header: 'Buttons', link: '/app/ui/buttons' },
          { header: 'Card', link: '/app/ui/card' },
          { header: 'Carousel', link: '/app/ui/carousel' },
          { header: 'Jumbotron', link: '/app/ui/jumbotron' },
          { header: 'Icons', link: '/app/ui/icons' },
          { header: 'List Groups', link: '/app/ui/list-groups' },
          { header: 'Modal', link: '/app/ui/modal' },
          { header: 'Nav', link: '/app/ui/nav' },
          { header: 'Navbar', link: '/app/ui/navbar' },
          { header: 'Notifications', link: '/app/ui/notifications' },
          { header: 'Pagination', link: '/app/tables/dynamic' },
          { header: 'Popovers & Tooltips', link: '/app/ui/popovers' },
          { header: 'Progress', link: '/app/ui/progress' },
          { header: 'Tabs & Accordion', link: '/app/ui/tabs' },
        ]"
      />
      <NavLink
              :activeItem="activeItem"
              header="Forms"
              link="/app/forms"
              iconName="flaticon-list"
              index="forms"
              :childrenLinks="[
          { header: 'Form Elements', link: '/app/forms/elements' },
          { header: 'Form Validation', link: '/app/forms/validation' },
          { header: 'Forms Wizard', link: '/app/forms/wizard' },
        ]"
      />
      <NavLink
              :activeItem="activeItem"
              header="Charts"
              link="/app/charts"
              iconName="flaticon-controls"
              index="charts"
              :childrenLinks="[
          { header: 'Charts Overview', link: '/app/charts/overview' },
          { header: 'Flot Charts', link: '/app/charts/flot' },
          { header: 'Morris Charts', link: '/app/charts/morris' },
          { header: 'Sparkline Charts', link: '/app/charts/sparkline' },
          { header: 'Easy Pie Charts', link: '/app/charts/easy-pie' },
        ]"
      />
      <NavLink
              :activeItem="activeItem"
              header="Grid"
              link="/app/grid"
              iconName="flaticon-menu-4"
              index="grid"
              isHeader
      />
      <NavLink
              :activeItem="activeItem"
              header="Tables"
              link="/app/tables"
              iconName="flaticon-equal-1"
              index="tables"
              :childrenLinks="[
          { header: 'Tables Basic', link: '/app/tables/basic' },
          { header: 'Tables Dynamic', link: '/app/tables/dynamic' },
        ]"
      />
      <NavLink
              :activeItem="activeItem"
              header="Maps"
              link="/app/maps"
              iconName="flaticon-map-location"
              index="maps"
              :childrenLinks="[
          { header: 'Google Maps', link: '/app/maps/google' },
          { header: 'Vector Maps', link: '/app/maps/vector' },
        ]"
      />
      <NavLink
              :activeItem="activeItem"
              header="Extra"
              link="/app/extra"
              iconName="flaticon-star"
              index="extra"
              :childrenLinks="[
          { header: 'Calendar', link: '/app/extra/calendar' },
          { header: 'Invoice', link: '/app/extra/invoice' },
          { header: 'Login Page', link: '/login' },
          { header: 'Error Page', link: '/error' },
          { header: 'Gallery', link: '/app/extra/gallery' },
          { header: 'Search Result', link: '/app/extra/search' },
          { header: 'Time Line', link: '/app/extra/time-line' },
        ]"
      /> 
        -->
      </ul>
      <h5 class="navTitle d-sm-down-none">
      <!--  Extras -->
        <!--  <a class="actionLink">
        <i class="la la-plus float-right" />
        </a>-->
      </h5>
     <!-- <ul class="sidebarLabels d-sm-down-none">
        <li>
          <a href="#">
            <i class="fa fa-circle text-warning mr-2" />
            <span class="labelName">FAQ</span>
          </a>
        </li>
        <li>
          <a href="#">
            <i class="fa fa-circle text-gray mr-2" />
            <span class="labelName">Terms & Conditions</span>
          </a>
        </li>
        <li>
          <a href="#">
            <i class="fa fa-circle text-danger mr-2" />
            <span class="labelName">Privacy Policy</span>
          </a>
        </li>
      </ul> -->
      <!--
    <h5 class="navTitle d-sm-down-none">
      PROJECTS
    </h5>
    <div class="sidebarAlerts d-sm-down-none">
      <b-alert
        v-for="alert in alerts"
        :key="alert.id"
        class="sidebarAlert" variant="transparent"
        show dismissible
      >
        <span>{{alert.title}}</span><br />
        <b-progress class="sidebarProgress progress-xs mt-1"
          :variant="alert.color" :value="alert.value" :max="100" />
        <small>{{alert.footer}}</small>
      </b-alert>
    </div>
      -->
    </nav>
  </b-collapse>
</template>

<script>
import { mapState, mapActions } from "vuex";
import NavLink from "./NavLink/NavLink";

export default {
  name: "Sidebar",
  components: { NavLink },
  data() {
    return {
      alerts: [
        {
          id: 0,
          title: "Sales Report",
          value: 15,
          footer: "Calculating x-axis bias... 65%",
          color: "info"
        },
        {
          id: 1,
          title: "Personal Responsibility",
          value: 20,
          footer: "Provide required notes",
          color: "danger"
        }
      ],
      username: window.localStorage.getItem("workforceUsername"),
      position: window.localStorage.getItem("workforcePosition"),
      center: window.localStorage.getItem("workforceCenter"),
      access: window.localStorage.getItem("workforceAccess"),
      analyticsAccess:false,
      staffAccess:false,
      blockAccess:false,
    };
  },
  methods: {
    ...mapActions("layout", ["changeSidebarActive", "switchSidebar"]),
    setActiveByRoute() {
      const paths = this.$route.fullPath.split("/");
      paths.pop();
      this.changeSidebarActive(paths.join("/"));
    }
  },
  created() {
    this.setActiveByRoute();
    if(this.access.includes('Internal Analytics') || this.access.includes('Stakeholder Analytics') ){
       this.analyticsAccess = true;
     }
        if(this.access.includes('Staffs Management')  ){
       this.staffAccess = true;
     }
         if(this.access.includes('Blocked Session')  ){
       this.blockAccess = true;
     }
    
  },
  computed: {
    ...mapState("layout", {
      sidebarOpened: state => !state.sidebarClose,
      activeItem: state => state.sidebarActiveElement
    })
  }
};
</script>

<!-- Sidebar styles should be scoped -->
<style src="./Sidebar.scss" lang="scss" scoped/>
